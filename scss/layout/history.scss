@use "../config/mixins.scss";

@layer desktop {
    body>svg {
        position: absolute;
    }

    .history {
        width: calc(100vw - (100vw - 100%));
        height: 100vw;
        aspect-ratio: 1 / 1;
        box-sizing: border-box;

        &-content {
            flow-into: historyRegion;
            font-family: Belgrano, sans-serif;

            &__paragraph {
                font-size: mixins.obtainViewportWidth(8px);
                margin: mixins.obtainViewportWidth(4px) 0;
                letter-spacing: -1px;

                @include mixins.liftUp($levels: 2, $modifiers: ("-regions--top")) {
                    color: #473623;
                }

                @include mixins.liftUp($levels: 2, $modifiers: ("-region--top")) {

                    &:first-of-type,
                    &:nth-of-type(2) {
                        padding-right: 15%;
                    }

                    &:not(:first-of-type, :nth-of-type(2)) {
                        padding-right: 40.5%;
                    }
                }
            }
        }

        &-regions {
            position: relative;

            &--top {
                display: flex;
                gap: mixins.obtainViewportWidth(3px);
                width: mixins.obtainViewportWidth(477px);
                padding-top: mixins.obtainViewportWidth(28px);
                padding-left: mixins.obtainViewportWidth(5px);
                background: radial-gradient(circle at 30% -100%, #d2b07a, transparent),
                    linear-gradient(to bottom, #c8a26a, #b68b4f);

                &::before {
                    position: absolute;
                    width: mixins.obtainViewportWidth(285px);
                    height: mixins.obtainViewportWidth(170px);
                    top: 0;
                    right: 0;
                    transform: translateX(-22%) scale(1.5, 2);
                    z-index: 1;
                    background: linear-gradient(to left, #251a11, #7d5f36);
                    mix-blend-mode: soft-light;
                    -webkit-mask-image: url("/svg/history-top-mask-01.svg");
                    mask-image: url("/svg/history-top-mask-01.svg");
                    pointer-events: none;
                    content: '';
                }
            }
        }

        &-region {
            flow-from: historyRegion;

            &__float {
                display: block !important;

                @include mixins.liftUp($levels: 1, $modifiers: ("--topmost")) {
                    width: 80%;
                    height: 100%;
                    float: right;
                    shape-outside: polygon(100% 24%, 76% 32%, 48% 46%, 27% 59%, 13% 75%, 0 100%, 100% 100%);
                }

                @include mixins.liftUp($levels: 1, $modifiers: ("--top")) {
                    margin-top: mixins.obtainViewportWidth(-30px);
                    width: 100%;
                    height: 100%;
                    float: right;
                    shape-outside: polygon(0 83%, 15% 68%, 33% 56%, 53% 42%, 76% 26%, 96% 18%, 99% 11%, 100% 0%, 100% 99%);
                }

                @include mixins.liftUp($levels: 1, $modifiers: ("-wrap--top-absolute")) {
                    width: 32%;
                    height: calc(100% + mixins.obtainViewportWidth(64px));
                    float: right;
                    shape-outside: polygon(45% 0%, 74% 15%, 88% 28%, 78% 44%, 49% 55%, 0 66%, 0% 100%, 100% 100%, 100% 0);
                }
            }

            &--topmost {
                flex: 1.3 1 0;
                height: mixins.obtainViewportWidth(675px);

                &::before {
                    display: block;
                    width: 10%;
                    height: 100%;
                    float: left;
                    shape-outside: polygon(77% 0, 34% 35%, 15% 52%, 6% 65%, 6% 73%, 8% 82%, 41% 91%, 100% 100%, 0% 100%, 0% 0%);
                    content: "";
                }
            }

            &--top {
                flex: 2 1 0;
                height: mixins.obtainViewportWidth(225px);

                &::before {
                    display: block;
                    content: "";
                    width: 5%;
                    height: 30%;
                    shape-outside: polygon(0 0, 100% 0, 16% 100%, 0% 100%);
                    float: left;
                }
            }

            &-wrap--top-absolute {
                position: absolute;
                top: 0;
                right: mixins.obtainViewportWidth(-115px);
                z-index: 1;
                width: mixins.obtainViewportWidth(285px);
                height: mixins.obtainViewportWidth(170px + 28px);
                filter: drop-shadow(mixins.obtainViewportWidth(-80px) 0px mixins.obtainViewportWidth(18px) rgba(#3f2b18, 0.5)) drop-shadow(mixins.obtainViewportWidth(-100px) mixins.obtainViewportWidth(-20px) mixins.obtainViewportWidth(18px) rgba(#3f2b18, 0.25)) drop-shadow(mixins.obtainViewportWidth(-80px) mixins.obtainViewportWidth(-70px) mixins.obtainViewportWidth(18px) rgba(#1f170e, 0.5)) drop-shadow(mixins.obtainViewportWidth(-20px) 0 0 rgba(#5d3f20, 0.5));
            }

            &__outline {
                display: block !important;
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                transform: translate(2%, 1%);
                z-index: 1;
                filter: drop-shadow(mixins.obtainViewportWidth(-6px) 0px mixins.obtainViewportWidth(7px) rgba(#664727, 0.8));
                opacity: 0.8;
                pointer-events: none;

                &-inner {
                    width: 100%;
                    height: 100%;
                    clip-path: url(#history-clip-topmost-outline);
                    background: linear-gradient(to bottom, #885c2d, #c68e3f);
                }
            }

            &-wrap--top-absolute & {
                position: relative;
                width: inherit;
                height: inherit;
                box-sizing: border-box;
                padding-top: 1%;
                padding-bottom: mixins.obtainViewportWidth(64px);
                clip-path: url(#history-clip-topmost);
                background: radial-gradient(circle at 50% -30%, #e9d8b9, transparent),
                    linear-gradient(to bottom left, #dfc493, #c68e3a 50%);

                &::before {
                    display: block;
                    content: "";
                    width: 65%;
                    height: calc(100% + mixins.obtainViewportWidth(64px));
                    float: left;
                    shape-outside: polygon(11% 100%, 47% 88%, 80% 75%, 98% 48%, 97% 17%, 86% 0, 0% 0%, 0% 100%);
                }
            }
        }
    }
}