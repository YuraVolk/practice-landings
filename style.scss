@use "sass:math";

@namespace svg url('http://www.w3.org/2000/svg');

$firstBlue: #179aea;
$secondBlue: #01e8f8;
$transparentBlue: #0f597c;
$backgroundPrimary: #1d224c;
$backgroundSecondary: #51398f;
$backgroundTertiaryRight: #172145;
$backgroundTertiaryLeft: #272b51;
$backgroundInnerLeft: #161d4b;
$backgroundInnerRight: #26204c;
$contentMain: #75778e;
$primaryActive: #f6f8f7;
$firstRed: #ff2c86;
$secondRed: #ff225e;
$tertiaryRed: #f8184a;
$tertiaryGradientRed: #f7286e;
$transparentRed: #681a56;
$firstOrange: #ff5108;
$secondOrange: #ffa21f;
$transparentOrange: #684937;
$secondaryRedBorder: #b42052;
$secondaryBlueBorder: #00d7d0;
$secondaryOrangeLeft: #fb67c5;
$secondaryOrangeRight: #ffa18b;
$secondaryBlueLeft: #7e55d7;
$secondaryBlueRight: #04d1f0;
$widgetBackgroundLeft: #080a31;
$widgetBackgroundRight: #222955;
$pieChartGradientRed: #771d51;
$pieChatGradientViolet: #2b2d91;
$violetPrimary: #464aff;
$violetSecondary: #a234eb;
$backgroundViolet: #574aa6;

@font-face {
    font-family: Icons;
    src: url('fonts/icomoon.eot?m765po');
    src: url('fonts/icomoon.eot?m765po#iefix') format('embedded-opentype'),
        url('fonts/icomoon.ttf?m765po') format('truetype'),
        url('fonts/icomoon.woff?m765po') format('woff'),
        url('fonts/icomoon.svg?m765po#icomoon') format('svg');
    font-weight: normal;
    font-style: normal;
    font-display: block;
}

%font-icon {
    font-family: Icons !important;
    speak: never;
    font-style: normal;
    font-weight: normal;
    font-variant: normal;
    text-transform: none;
    line-height: 1;

    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

%icon-notifications-outline::before {
    @extend %font-icon;
    content: "\1f514";
}

%icon-notebook-list::before {
    @extend %font-icon;
    content: "\1f4dd";
}

%icon-notebook::before {
    @extend %font-icon;
    content: "\1f4d2";
}

%icon-book::before {
    @extend %font-icon;
    content: "\1f4d9";
}

%icon-lock::before {
    @extend %font-icon;
    content: "\1f512";
}

%icon-shield::before {
    @extend %font-icon;
    content: "\1f6e1";
}

%icon-home::before {
    @extend %font-icon;
    content: "\1f3e0";
}

%icon-coin-dollar::before {
    @extend %font-icon;
    content: "\1f4b2";
}

%icon-search::before {
    @extend %font-icon;
    content: "\1f50e";
}

%icon-cog::before {
    @extend %font-icon;
    content: "\2699";
}

@function mapToRange($value, $currentMin, $currentMax, $newMin, $newMax) {
    @return ($value - $currentMin) * math.div($newMax - $newMin, $currentMax - $currentMin);
}

@mixin centralizeAbsolute($defaultTransform: true) {
    position: absolute;
    top: 50%;
    left: 50%;

    @if ($defaultTransform) {
        transform: translate(-50%, -50%);
    }
}

html {
    font-size: 16px;
}

body {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 0;
    width: 100vw;
    height: 100vh;
    background: linear-gradient(to right, $firstBlue, $secondBlue);
    font-family: Arial;
}

.application {
    display: flex;
    flex-wrap: wrap;
    width: 90vw;
    height: 92.5vh;
    padding-top: 16px;
    border-radius: 1.5vh;
    overflow: hidden;
    background: linear-gradient(to bottom right, $backgroundPrimary, $backgroundInnerRight);
    border-radius: 16px;
    box-shadow: 19px 19px 38px rgba(#222, 0.4),
        -19px -19px 38px rgba(#222, 0.35);
}

.header {
    @mixin headerButton {
        position: relative;
        width: 1.55rem;
        height: 1.55rem;
        border-radius: 50%;
        box-shadow: 3px 2px 5px rgba(0, 0, 0, 0.85),
             -2px -2px 5px rgba($primaryActive, 0.2);
    }

    display: flex;
    align-items: center;
    gap: 6.5vw;
    flex: 1 1 100%;
    padding-left: 16px;
    padding-bottom: 5vh;

    &-logotype {
        display: flex;
        align-items: center;
        gap: 0.8rem;

        &__image {
            @include headerButton;
            background: linear-gradient(to bottom right, $firstRed, $secondRed);

            &::before {
                @include centralizeAbsolute;
                font-size: 0.875rem;
                font-weight: 600;
                color: $primaryActive;
                content: "L";
            }
        }

        &__heading {
            padding: 0.31rem 0.4rem 0.22rem 0.5rem;
            border: rgba($primaryActive, 0.25) 2px solid;
            border-radius: 0.15rem;
            margin: 0;
            font: 700 0.7rem/1.1 Arial, sans-serif;
            color: $primaryActive;
            text-transform: uppercase;
        }
    }

    &-navigation {
        display: flex;
        align-items: center;
        gap: 2.85vw;

        &__link {
            padding-bottom: 0.18rem;
            font-size: 0.58rem;
            color: $contentMain;
            text-decoration: none;
            letter-spacing: 0.4px;

            &--active {
                padding-top: calc(0.18rem - 1.75px);
                border-bottom-width: 1.75px;
                border-bottom-style: solid;
                border-image: linear-gradient(to right, $firstBlue 25%, $secondBlue) 10;
                color: $primaryActive;
            }
        }
    }

    &-user-information {
        display: flex;
        align-items: center;
        justify-content: flex-end;
        gap: 2.1818vw;
        flex-grow: 1;
        color: $primaryActive;
        
        &__search-icon {
            @extend %icon-search;
            font-size: 1.125rem;
        }

        &__notifications {
            @extend %icon-notifications-outline;
            position: relative;
            font-size: 1.125rem;

            &::after {
                position: absolute;
                top: 0;
                transform: translate(-45%, -33%);
                padding: 0.225rem 0.2515rem 0.18rem 0.2515rem;
                border-radius: 50%;
                font-size: 0.6rem;
                line-height: 0.7;
                background: linear-gradient(to bottom right, $firstRed, $secondRed);
                content: attr(data-notifications);
            }
        }

        &__avatar {
            @include headerButton;
            position: relative;
            margin-right: 1.125rem;
            background: linear-gradient(to bottom right, $violetPrimary, $violetSecondary);
            overflow: hidden;

            svg|svg {
                @include centralizeAbsolute($defaultTransform: false);
                transform: translate(-55%, -36%) scale(1.6);
            }

            svg|g.head {
                fill: $primaryActive;
            }

            #person-gradient {
                --color-start: #26204c;
                --color-end: #161d4b;
            }

            svg|g.body {
                fill: url(#person-gradient) #26204c;
            }
        }

        &__hamburger {
            position: relative;
            width: 1rem;
            height: 1.5px;
            margin-left: 0.5rem;
            margin-right: 1.15rem;
            background-color: $primaryActive;
            cursor: pointer;

            &::before {
                position: absolute;
                top: 0;
                right: 0;
                transform: translateY(-300%);
                width: 1.5rem;
                height: 1.5px;
                background-color: $primaryActive;
                cursor: pointer;
                content: "";
            }

            &::after {
                position: absolute;
                bottom: 0;
                right: 0;
                transform: translateY(300%);
                width: 1.5rem;
                height: 1.5px;
                background-color: $primaryActive;
                cursor: pointer;
                content: "";
            }
        }
    }
}

.sidebar {
    width: 12.5vw;
    padding-left: 2.5vw;
    padding-right: 2.5vw;
    font-size: 0.6rem;
    background: linear-gradient(to bottom, $backgroundPrimary, $backgroundTertiaryRight 3.5%);

    &__heading {
        margin: 2.15vw 0 0 0;
        color: $contentMain;
        font-size: inherit;
        font-weight: 700;
        letter-spacing: -0.5px;
        text-transform: uppercase;
    }

    &-navigation {
        margin-top: calc(2.2121vw - 2vh);

        &__link {
            display: block;
            padding: 2vh 0;
            border-bottom: 1.5px solid $contentMain;
            color: $primaryActive;
            text-decoration: none;
            line-height: 1.25;
            font-size: 0.9em;

            &::before {
                margin-right: 0.7rem;
                font-size: 0.825rem;
                color: $contentMain;
            }

            &--home {
                @extend %icon-home;
            }

            &--security {
                @extend %icon-shield;
            }

            &--credentials {
                @extend %icon-lock;
            }

            &--payment {
                @extend %icon-coin-dollar;
            }

            &--settings {
                @extend %icon-cog;
            }
        }
    }

    &-counter {
        position: relative;
        width: 100%;
        aspect-ratio: 1/1;
        margin: 5vh 0 0;
        border-radius: 1.05vh;
        background: linear-gradient(to bottom right, $widgetBackgroundLeft, $widgetBackgroundRight 66%);
        box-shadow: 0.5pc 0.5pc 0.75pc #171b39,
             -0.1pc -0.1pc 0.5pc #2d3771,
             inset 0 0 0.2pc $widgetBackgroundLeft, inset 0 0 0.2pc $widgetBackgroundLeft, inset 0 0 0.2pc $widgetBackgroundLeft;

        &-wrap {
            width: 100%;
            margin: 5.3vh 0 0;
        }

        &__caption {
            margin-top: 5dvh;
            font-size: 0.8em;
            font-weight: bold;
            letter-spacing: -0.5px;
            color: $contentMain;
        }

        &__circle {
            @include centralizeAbsolute($defaultTransform: false);
            transform: translate(-50%, -60%);
            width: calc(53% + 1px);
            height: 53%;
            box-sizing: border-box;
            padding: 0.5px;
            border: 2px dotted rgba($contentMain, 0.6);
            border-radius: 50%;
            background: linear-gradient(275deg, $widgetBackgroundLeft 15%, $widgetBackgroundRight);
            background-clip: content-box;
            background-position: center;
            box-shadow: 0.15pc 0.15pc 1.625pc #0e1022;
            text-align: center;
            color: $primaryActive;

            &::before {
                position: absolute;
                top: -25%;
                left: 50%;
                transform: translateX(-50%);
                z-index: 2;
                width: 12.5%;
                height: 12.5%;
                background: linear-gradient(to right, $firstRed, $secondRed);
                -webkit-clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
                clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
                content: "";
            }
        }

        &__amount {
            display: block;
            font-size: 0.55rem;
            font-weight: 700;
            transform: translateY(110%);
        }

        &__description {
            margin: 0;
            font-size: 0.35rem;
            transform: translateY(0.75rem);
        }

        &__heading {
            position: absolute;
            left: 50%;
            bottom: 14%;
            transform: translateX(-50%);
            width: 100%;
            margin: 0;
            font: 700 0.425rem/0 Arial, sans-serif;
            text-align: center;
            text-transform: uppercase;
            color: $primaryActive;
        }

        &__upper-indicator {
            @include centralizeAbsolute($defaultTransform: false);
            transform: translate(-50%, -60%);
            z-index: 1;
            width: 64%;
            height: 63%;
            border-radius: 50%;
            background: linear-gradient(to right, $firstRed, $secondRed);
            -webkit-mask-image: radial-gradient(circle at center, transparent 59.1269%, white 60.1269%);
            mask-image: radial-gradient(circle at center, transparent 84.1269%, white 85.1269%);
            -webkit-clip-path: polygon(0 0, 100% 0, 100% 25%, 87% 33%, 13% 33%, 0% 25%);
            clip-path: polygon(0 0, 100% 0, 100% 25%, 87% 33%, 13% 33%, 0% 25%);
        }
    }
}

.main {
    display: grid;
    grid-template-columns: 33% 30% 37%;
    grid-template-rows: 23.5% 24.5% 15% 7.5% 29.5%;
    grid-template-areas: "todo-list todo-list todo-list"
        "pie-charts settings histograms"
        "area-charts settings progress-bars"
        "area-charts combined-area-chart line-chart"
        "area-charts combined-area-chart line-chart";
    height: 77.7vh;
    position: relative;
    flex: 1 0 0;
    padding: 4vh 0 0 4vw;
    border-top-left-radius: 12px;
    background: linear-gradient(to bottom right, $backgroundInnerLeft, $backgroundInnerRight);
    transform: perspective(150px);
    overflow: hidden;

    &::after {
        position: absolute;
        width: 160%;
        height: 100%;
        top: 0;
        left: -3%;
        right: 0;
        bottom: 0;
        border-top-left-radius: inherit;
        transform-origin: left center 0;
        box-shadow: inset 4vw 4vh 0 #0d143b;
        -webkit-clip-path: polygon(100% 0, 15% 16%, 1% 18%, 0 11%, 0 0);
        clip-path: polygon(100% 0, 65% 66%, 1% 68%, 0 11%, 0 0);
        mask-size: 100vw 100vh;
        -webkit-mask-size: 100vw 100vh;
        mask-image: -webkit-gradient(linear, center bottom, center top,
                color-stop(0.00, rgba(0, 0, 0, 0)),
                color-stop(1.00, rgba(0, 0, 0, 1)));
        -webkit-mask-image: -webkit-gradient(linear, center bottom, center top,
                color-stop(0.00, rgba(0, 0, 0, 0)),
                color-stop(1.00, rgba(0, 0, 0, 1)));
                filter: blur(calc((3.55vw + 2.526vh) / 4));
        content: "";
    }
}

.todo-list {
    &-wrap {
        display: grid;
        align-items: center;
        grid-area: todo-list;
        padding: 0 3vw 0 0;
    }

    position: relative;
    transform: perspective(150px);
    transform-style: preserve-3d;
    display: flex;
    align-items: center;
    height: 56.5%;
    padding: 0;
    border: 1px solid rgba($contentMain, 0.1);
    border-radius: 0.65rem;
    margin: 0;
    list-style-type: none;
    background: linear-gradient(to right, $backgroundTertiaryLeft, $backgroundTertiaryRight);

    &::before {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        transform-origin: left center 0;
        transform: rotateY(9deg);
        border-radius: 0.65rem;
        box-shadow: 0 0 8.75px 7.5px #212545;
        content: "";
    }

    &::after {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        transform-origin: right center 0;
        transform: rotateY(-9deg);
        border-radius: 0.65rem;
        box-shadow: 0 0 8px 2.5px #0c101f;
        content: "";
    }

    &-item {
        display: grid;
        grid-template-rows: 1fr 1fr;
        grid-template-columns: 13.75% 49.75% 24%;
        column-gap: 6.25%;
        flex: 1 1 0;
        padding: 0 0.76vw 0 1.3vw;

        &:not(:last-child) {
            border-right: 1px solid $contentMain;
        }
        
        &__icon {
            grid-row: span 2;
            align-self: center;
            color: $contentMain;
            font-size: 150%;

            &::before {
                margin-right: 5px;
            }

            &--book {
                @extend %icon-book;
            }

            &--book-with-pencil {
                @extend %icon-notebook-list;
            }

            &--notebook {
                @extend %icon-notebook;
            }
        }

        &__heading {
            align-self: end;
            margin: 0;
            color: $primaryActive;
            font-size: 0.6rem;
        }

        &__description {
            margin: 0;
            color: $contentMain;
            font-size: 0.5rem;
        }

        &__price {
            display: flex;
            justify-content: center;
            align-items: center;
            border: 2px solid $secondaryBlueBorder;
            border-radius: 0.5rem;
            font-size: 0.45rem;
            letter-spacing: -0.5px;
            background: linear-gradient(to right, $firstBlue, $secondBlue);
        }
    }
}

.pie-chart {
    &-section {
        display: grid;
        grid-template-columns: repeat(2, calc(50% - 1.25vw));
        gap: 2.6vw;
        grid-area: pie-charts;
        padding-right: 2.95vw;
    }

    &-wrap {
        position: relative;
        overflow: hidden;
        margin: 0;

        &::after {
            position: absolute;
            left: 0;
            top: 3vw + 1.4vw + 0.66vw;
            width: 100%;
            height: 1.5px;
            content: "";
        }

        &--red::after {
            background: linear-gradient(to right, $tertiaryGradientRed, $tertiaryRed) border-box; 
        }

        &--purple::after {
            background: linear-gradient(to right, $violetPrimary, $violetSecondary) border-box; 
        }
    }

    position: relative;
    width: 5.917vw;
    height: 2.958vw;
    border-top-left-radius: 100vh;
    border-top-right-radius: 100vh;
    border: 1.4vw solid transparent;
    border-bottom: 0;
    
    -webkit-mask: 
       linear-gradient(#fff 0 0) content-box, 
       linear-gradient(#fff 0 0);
    mask: linear-gradient(#fff 0 0) content-box, 
       linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    -webkit-clip-path: polygon(0 0, 100% 0, 100% 99%, 0 99%);
    clip-path: polygon(0 0, 100% 0, 100% 99%, 0 99%);

    &-wrap--red & {
        background: linear-gradient(to right, $tertiaryGradientRed, $tertiaryRed) border-box; 
    }

    &-wrap--purple & {
        background: linear-gradient(to right, $violetPrimary, $violetSecondary) border-box; 
    }

    &__half-circle {
        position: absolute;
        bottom: 0;
        left: calc(-1.4vw + 0.5px);
        transform-origin: bottom;
        z-index: 1;
        width: 5.917vw;
        height: 2.958vw;
        border-top-left-radius: 100vh;
        border-top-right-radius: 100vh;
        border: 1.4vw solid transparent;
        border-bottom: 0;
    }

    &-wrap--red &__half-circle {
        background: linear-gradient(to right, $pieChartGradientRed 33%, $secondRed) border-box; 
    }

    &-wrap--purple &__half-circle {
        background: linear-gradient(to right, $pieChatGradientViolet 33%, $violetSecondary) border-box; 
    }

    @for $i from 0 through 100 {
        &__half-circle[data-progress="#{$i}"] {
            transform: rotate(#{mapToRange($value: $i, $currentMin: 0, $currentMax: 100, $newMin: 0, $newMax: 180)}deg);
        }
    }

    &__heading {
        position: absolute;
        top: 0;
        left: 50%;
        transform: translate(calc(-50% + 0.5px), 150%);
        margin: 0;
        font-size: 1.48vw;
        color: $primaryActive;
    }

    &__description {
        margin-top: 2.15vw;
        font-size: 0.87vw;
        color: $primaryActive;
    }
}

.settings-section {
    grid-area: settings;
}

.histogram-section {
    grid-area: histograms;
}

.progress-section {
    grid-area: progress-bars;
}

.area-charts-section {
    grid-area: area-charts;
}

.combined-area-chart-section {
    grid-area: combined-area-chart;
}

.line-chart-section {
    grid-area: line-chart;
}
